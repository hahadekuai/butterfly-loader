!function(a){var b={loader:{}},c=b.loader,d=[],e=function(a){return c[a]},f=function(a,b,f){if(c[a])throw"module already exist: "+a;if(f||(f=b,b=d),"function"==typeof f){for(var g=[],h=0,i=b.length;i>h;h++)g.push(e(b[h]));f=f.apply(null,g)}c[a]=f};f("version","2.2"),f("origindefine",function(){return a.define}),f("originbutterfly",function(){return a.butterfly}),f("global",function(){return a}),f("modules",b),f("loaderdefine",function(){return f}),a.butterfly=f,a.define=f,f._modules=b}(this),define("util",function(){var a=Object.prototype.toString,b=1,c={isArray:function(b){return"[object Array]"===a.call(b)},extend:function(a,b){for(var c in b){var d=b[c];null!==d&&void 0!==d&&(a[c]=d)}return a},each:function(a,b){if(a.length)for(var c=0,d=a.length;d>c&&b(c,a[c])!==!1;c++);else for(var e in a)if(b(e,a[e])===!1)break},proxy:function(a,b){var c=a[b];return function(){return c.apply(a,arguments)}},assert:function(a,b){if(!a)throw new Error(b)},guid:function(){return b++}};return c}),define("log",["global","util"],function(a,b){var c={none:0,error:1,warn:2,info:3,debug:4},d=function(){var b=a.location,c=b?b.search:"";return(/\bdebug-log-level=(\w+)/.exec(c)||{})[1]||window.logLevel||"error"}(),e=[].join,f=function(a,b){f.isEnabled(b)&&(a="string"!=typeof a&&a.length?e.call(a," "):a,a="[loader] "+a,f.handler(a,b))};return f.level=d,f.isEnabled=function(a){return c[a]<=c[f.level]},b.each(c,function(a){f[a]=function(){f(arguments,a)}}),f.handler=a.console?function(a,b){console[b]?console[b](a):console.log&&console.log(a)}:function(){},f}),define("event",["util","log"],function(a,b){var c={},d=[].slice;return{_cache:c,on:function(a,d){b.debug("event.on:",a);var e=c[a];e||(e=c[a]=[]),e.push(d)},trigger:function(a){b.debug("event.trigger:",a);var e=c[a],f=d.call(arguments,1);if(e)for(var g=0,h=e.length;h>g;g++){var i=e[g].apply(null,f);if(null!==i&&void 0!==i)return i}},off:function(a,d){b.debug("event.off:",a);var e=c[a];if(e){for(var f=e.length-1;f>=0;f--)e[f]===d&&e.splice(f,1);e.length||delete c[a]}}}}),define("define",["util","log","event","modules"],function(a,b,c,d){var e=a.assert,f=a.isArray,g=function(a,e,f,g){var h=i(e,f,g),e=h.id;h.namespace=a;var k=d[a];return k||(k=d[a]={}),k[e]?(b.warn(j(h),"already defined, ignore it"),k[e]):(b.debug("define module:",j(h)),k[e]=h,c.trigger("define",a,h),h)},h=[],i=function(b,c,d){void 0!==d||f(c)||(d=c,c=h),"function"==typeof b?(d=b,c=h,b=null):f(b)&&(c=b,b=null),e(f(c),"arguments error, depends should be an array");var g=!b;return b=b||"____anonymous"+a.guid(),{id:b,depends:c,factory:d,anonymous:g}},j=function(a){return a.namespace+":"+a.id};return g._regular=i,g._EMPTY=h,g}),define("require",["util","log","event","modules"],function(a,b,c,d){var e=a.assert,f=function(b,c,d){c=a.isArray(c)?c:[c];var e={proxy:!0,namespace:b,id:"____require"+a.guid(),depends:c,factory:function(){return arguments}};return g(e,function(){d&&d.apply(null,e.exports)}),e.exports&&e.exports[0]},g=function(c,d){if(c.loadtimes>0)return c.loadtimes++,b.debug(k(c),"is loaded",c.loadtimes,"times"),d(),void 0;var e=c.loadlist=c.loadlist||[];e.push(d),e.length>1||h(c,function(){i(c,function(){b.debug(k(c),"is loaded"),c.loadtimes=e.length,delete c.loadlist,a.each(e,function(a,b){b()})})})},h=function(a,e){var f=a.depends,h=f.length,i=0;if(0===h)return e();for(var k=function(){i>=h&&e()},l=d[a.namespace],m=a.adepends=f.slice(0),n=function(d){var e=f[d],h=c.trigger("alias",a.namespace,e);h&&(b.debug("alias",e,"->",h),e=h),m[d]=e;var n=l[e],o=function(a){g(a,function(){i++,k()})};n?o(n):j(a.namespace,e,o)},o=0;h>o;o++)n(o)},i=function(f,g){var h=f.factory;if("function"==typeof h){var i=d[f.namespace],j=f.adepends,l={id:f.id,exports:{}},m=[];j&&j.length&&a.each(j,function(a,b){var c=i[b];e("exports"in c,"module should be loaded: "+b),m[a]=c.exports&&"function"==typeof c.exports.$compile?c.exports.$compile(l,f):c.exports});try{b.debug("compile",k(f)),h=h.apply(null,m),(null===h||void 0===h)&&(h=l.exports)}catch(n){if(b.isEnabled("info"))throw n;c.trigger("error",f.namespace,n),b.error(n)}}f.exports=h,g()},j=function(a,e,f){var g=c.trigger("resolve",a,e),h=a+":"+e;if(!g)return b.error("can not resolve module: ",h),void 0;b.debug("resolve",h,"->",g);var i={namespace:a,id:e,url:g},j=c.trigger("request",a,i,function(){var c=d[a][e];return c?(f(c),void 0):(b.error("can not find module:",h),void 0)});j||b.error("request handler not found:",h)},k=function(a){return a.namespace+":"+a.id};return f}),define("request",["global","log","event"],function(a,b){var c=document,d=c.head||c.getElementsByTagName("head")[0]||c.documentElement,e=c.getElementsByTagName("base")[0],f=/loaded|complete|undefined/,g=/\.css(\?|$)/,h=function(){var a=g.test(arguments[0])?"css":"script";return h[a].apply(h,arguments)};h.script=function(a,d){b.debug("request script:",a),d=d||{};var e=c.createElement("script");i(e,a,d),e.async="async",e.src=a,d.charset&&(e.charset=d.charset),m(e)};var i=function(c,e,g){c.onload=c.onreadystatechange=function(h){h=h||a.event||{},("load"===h.type||f.test(""+c.readyState))&&(c.onload=c.onreadystatechange=c.onerror=null,b.isEnabled("debug")||d.removeChild(c),b.debug("request script success:",e),g.success&&g.success())},c.onerror=function(){c.onload=c.onreadystatechange=c.onerror=null,b.error("request js error:",e),g.error&&g.error()}},j=1*(a.navigator&&a.navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536;h.css=function(a,d){b.debug("request css:",a),d=d||{};var e=c.createElement("link");e.rel="stylesheet",e.href=a,d.charset&&(e.charset=d.charset);var g=function(){b.debug("request css success:"+a),d.success&&d.success()},h=function(){b.error("request css error:"+a),d.error&&d.error()};!j||"onload"in e?(e.onload=e.onreadystatechange=function(){f.test(e.readyState)&&(e.onload=e.onreadystatechange=e.onerror=null,g())},e.onerror=function(){e.onload=e.onreadystatechange=e.onerror=null,h()}):(b.debug("request css use pool"),setTimeout(function(){l(e,g,h)},1)),m(e)};var k=/security|denied/i,l=function(a,b,c){var d=!1;setTimeout(function(){d||(d=!0,c())},1e4);var e=function(){var c=!1;try{c=a.sheet&&a.sheet.cssRules}catch(f){c=k.test(f.message)}d||(c?(d=!0,b()):setTimeout(e,20))};e()},m=function(a){e?d.insertBefore(a,e):d.appendChild(a)};return h}),define("loader",["util","log","event","define","require","modules","request"],function(a,b,c,d,e,f){var g={},h=function(a){if(g[a])throw"loader already exist: "+a;g[a]=this,this.namespace=a,this._config={},m(this),o(this),q(this)};h.get=function(a){return g[a]};var i=h.prototype,j={alias:1,resolve:1};i.config=function(a,b){var c=this._config,d=j[a];return void 0===b?d?c[a]||[]:c[a]:(d?(c[a]=c[a]||[],c[a].push(b)):c[a]=b,void 0)},i.define=function(a,b,c){return d(this.namespace,a,b,c)},i.require=function(a,b){return e(this.namespace,a,b)},i.hasDefine=function(a){var b=f[this.namespace];return b&&b[a]},i.getModules=function(){var a=[],b=f[this.namespace];if(b)for(var c in b)b[c].anonymous||a.push(c);return a};var k={},l=[].slice;i.on=function(b,d){var e=this,f=function(a){return e.namespace===a?d.apply(e,l.call(arguments,1)):void 0};d.guid=a.guid(),k[d.guid]=f,c.on(b,f)},i.off=function(a,b){c.off(a,k[b.guid]),delete k[b.guid]};var m=function(a){c.on("alias",function(b,c){return a.namespace===b?p(a._config.alias,function(a,b){return"function"==typeof b?b(c):b[c]}):void 0})},n=/(^\w*:\/\/)|(^[.\/])/,o=function(a){c.on("resolve",function(b,c){if(a.namespace===b){var d=p(a._config.resolve,function(a,b){return b(c)});return!d&&n.test(c)&&(d=c),d}})},p=function(a,b){if(a)for(var c=0,d=a.length;d>c;c++){var e=a[c],f=b(c,e);if(f)return f}},q=function(b){b.define("require",function(){return a.proxy(b,"require")}),b.define("module",function(){return{$compile:function(a){return a}}}),b.define("exports",function(){return{$compile:function(a){return a.exports}}})};return h}),define("weave",["modules","util","log","event","define","require","loader","request","global","origindefine","originbutterfly"],function(a,b,c,d,e,f,g,h,i,j,k){d.on("define",function(a,b){b.anonymous&&(c.debug("require anonymous module:",b.namespace,":",b.id),f(b.namespace,b.id))});var l={},m=/(^\w*:\/\/)|(^[.\/])/;d.on("request",function(f,i,j){var k=i.url,n=l[k]=l[k]||[];if(n.push(j),n.length>1)return!0;var o=g.get(f),p=o.config("request");return p=b.extend({},p),p.success=function(){var d=a[f]||{};!d[i.id]&&m.test(i.id)&&(c.debug("define proxy module for:",i.id),e(f,i.id)),delete l[k],b.each(n,function(a,b){b()})},p.error=function(){var a=new Error("request error: "+k);d.trigger("error",f,a)},h(k,p),!0});var n=new g("butterfly");n.loader=function(a){return new g(a)},n.define("loaderdefine",function(){return e}),n.define("global",function(){return i}),n._modules=a,i.butterfly=n,i.define=b.proxy(n,"define"),n.noConflict=function(a){return i.define=j,a&&(i.butterfly=k),n}});