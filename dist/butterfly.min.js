!function(a){var b={loader:{}},c=b.loader,d=[],e=function(a){return c[a]},f=function(a,b,f){if(c[a])throw"module already exist: "+a;if(f||(f=b,b=d),"function"==typeof f){for(var g=[],h=0,i=b.length;i>h;h++)g.push(e(b[h]));f=f.apply(null,g)}c[a]=f};f("version","2.0.0"),f("origindefine",function(){return a.define}),f("originbutterfly",function(){return a.butterfly}),f("global",function(){return a}),f("modules",b),f("loaderdefine",function(){return f}),f._modules=b,a.butterfly=f,a.define=f}(this),define("util",function(){var a=Object.prototype.toString,b=1,c={isArray:function(b){return"[object Array]"===a.call(b)},extend:function(a,b){for(var c in b){var d=b[c];null!==d&&void 0!==d&&(a[c]=d)}return a},each:function(a,b){if(a.length)for(var c=0,d=a.length;d>c&&b(c,a[c])!==!1;c++);else for(var e in a)if(b(e,a[e])===!1)break},proxy:function(a,b){return function(){return a[b].apply(a,arguments)}},assert:function(a,b){if(!a)throw new Error(b)},guid:function(){return b++}};return c}),define("log",["global","util"],function(a,b){var c={none:0,error:1,warn:2,info:3,debug:4},d=function(){var b=a.location,c=b?b.search:"";return(/\bdebug-log-level=(\w+)/.exec(c)||{})[1]||"error"}(),e=[].join,f=function(a,b){f.isEnabled(b)&&(a="string"!=typeof a&&a.length?e.call(a," "):a,a="[loader] "+a,f.handler(a,b))};return f.level=d,f.isEnabled=function(a){return c[a]<=c[f.level]},b.each(c,function(a){f[a]=function(){f(arguments,a)}}),f.handler=a.console?function(a,b){console[b]?console[b](a):console.log&&console.log(a)}:function(){},f}),define("event",["util","log"],function(a,b){var c={},d=[].slice;return{_cache:c,on:function(a,d){b.debug("event.on:",a);var e=c[a];e||(e=c[a]=[]),e.push(d)},trigger:function(a){b.debug("event.trigger:",a);var e=c[a],f=d.call(arguments,1);if(e)for(var g=0,h=e.length;h>g;g++){var i=e[g].apply(null,f);if(null!==i&&void 0!==i)return i}},off:function(a,d){b.debug("event.off:",a);var e=c[a];if(e){for(var f=e.length-1;f>=0;f--)e[f]===d&&e.splice(f,1);e.length||delete c[a]}}}}),define("define",["util","log","event","modules"],function(a,b,c,d){var e=a.assert,f=a.isArray,g=function(a,e,f,g){var h=i(e,f,g),e=h.id;h.namespace=a;var k=d[a];return k||(k=d[a]={}),k[e]?(b.warn(j(h),"already defined, ignore it"),void 0):(b.debug("define module:",j(h)),k[e]=h,c.trigger("define",h),h)},h=[],i=function(b,c,d){void 0!==d||f(c)||(d=c,c=h),"function"==typeof b?(d=b,c=h,b=null):f(b)&&(c=b,b=null),e(f(c),"arguments error, depends should be an array");var g=!b;return b=b||"____anonymous"+a.guid(),{id:b,depends:c,factory:d,anonymous:g}},j=function(a){return a.namespace+":"+a.id};return g._regular=i,g._EMPTY=h,g}),define("require",["util","log","event","modules"],function(a,b,c,d){var e=a.assert,f=function(b,c,d){c=a.isArray(c)?c:[c];var e={proxy:!0,namespace:b,id:"____require"+a.guid(),depends:c,factory:function(){return arguments}};return g(e,function(){d&&d.apply(null,e.exports)}),e.exports&&e.exports[0]},g=function(c,d){if(c.loadtimes>0)return c.loadtimes++,b.debug(k(c),"is loaded",c.loadtimes,"times"),d(),void 0;var e=c.loadlist=c.loadlist||[];e.push(d),e.length>1||h(c,function(){i(c,function(){b.debug(k(c),"is loaded"),c.loadtimes=e.length,delete c.loadlist,a.each(e,function(a,b){b()})})})},h=function(a,e){var f=a.depends,h=f.length,i=0;if(0===h)return e();for(var k=function(){i>=h&&e()},l=d[a.namespace],m=a.adepends=a.depends.slice(0),n=function(d){var e=f[d],h=c.trigger("alias",a.namespace,e);h&&(b.debug("alias",e,"->",h),e=h),m[d]=e;var n=l[e],o=function(a){g(a,function(){i++,k()})};n?o(n):j(a.namespace,e,o)},o=0;h>o;o++)n(o)},i=function(f,g){var h=f.factory;if("function"==typeof h){var i=d[f.namespace],j=f.adepends,l={id:f.id,exports:{}},m=[];j&&j.length&&a.each(j,function(a,b){var c=i[b];e("exports"in c,"module should be loaded: "+b),m[a]=c.exports&&"function"==typeof c.exports.$compile?c.exports.$compile(l,f):c.exports});try{b.debug("compile",k(f)),h=h.apply(null,m),(null===h||void 0===h)&&(h=l.exports)}catch(n){if(b.isEnabled("info"))throw n;n.namespace=f.namespace,c.trigger("error",n),b.error(n)}}f.exports=h,g()},j=function(a,e,f){var g=c.trigger("resolve",a,e),h=a+":"+e;if(!g)return b.error("can not resolve module: ",h),void 0;b.debug("resolve",h,"->",g);var i=c.trigger("request",{namespace:a,id:e,url:g},function(){var c=d[a][e];return c?(f(c),void 0):(b.error("can not find module:",h),void 0)});i||b.error("request handler not found:",h)},k=function(a){return a.namespace+":"+a.id};return f}),define("request",["global","log","event"],function(a,b){var c=document,d=c.head||c.getElementsByTagName("head")[0]||c.documentElement,e=c.getElementsByTagName("base")[0],f=1*(a.navigator&&a.navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536,g=/loaded|complete|undefined/,h=/\.css(\?|$)/,i=function(){var a=h.test(arguments[0])?"css":"script";return i[a].apply(i,arguments)};i.script=function(a,d,e){b.debug("request script:",a),e=e||{};var f=c.createElement("script");j(a,f,d),f.async="async",f.src=a,e.charset&&(f.charset=e.charset),k(f)};var j=function(c,e,f){e.onload=e.onreadystatechange=function(h){h=h||a.event||{},("load"===h.type||g.test(""+e.readyState))&&(e.onload=e.onreadystatechange=e.onerror=null,b.isEnabled("debug")||d.removeChild(e),b.debug("request script success:",c),f())},e.onerror=function(){e.onload=e.onreadystatechange=e.onerror=null,b.error("request js error:",c)}};i.css=function(a,d,e){b.debug("request css:",a),e=e||{};var h=c.createElement("link");if(h.rel="stylesheet",h.href=a,e.charset&&(h.charset=e.charset),!f&&"onload"in h)h.onload=h.onreadystatechange=function(){g.test(h.readyState)&&(h.onload=h.onreadystatechange=h.onerror=null,b.debug("request css success:",a),d())},h.onerror=function(){h.onload=h.onreadystatechange=h.onerror=null,b.error("request css error: "+a)};else{b.debug("request css use image proxy");var i=c.createElement("img");i.onerror=function(){i.onerror=null,b.debug("request css success with image proxy:",a),d()},i.src=a}k(h)};var k=function(a){e?d.insertBefore(a,e):d.appendChild(a)};return i}),define("loader",["util","log","event","define","require","modules","request"],function(a,b,c,d,e,f,g){var h=function(a,b){this.namespace=a,this._config={},b&&this.config(b),k(this),m(this),o(this)},i=h.prototype;i.config=function(b,c){var d=this._config;if("string"==typeof b&&void 0===c)return d[b]||[];var e={};"string"==typeof b?e[b]=c:a.extend(e,b),a.each(e,function(){d[b]=d[b]||[],d[b].push(c)})},i.define=function(a,b,c){return d(this.namespace,a,b,c)},i.require=function(a,b){return e(this.namespace,a,b)},i.hasDefine=function(a){var b=f[this.namespace];return b&&b[a]},i.getModules=function(){var a=[],b=f[this.namespace];if(b)for(var c in b)b[c].anonymous||a.push(c);return a};var j={};i.on=function(a,b){var d=this.namespace,e=function(a){return a&&("string"==typeof a?a===d:a.namespace===d)?b.apply(self,arguments):void 0};j[b]=e,c.on(a,e)},i.off=function(a,b){c.off(a,j[b]),delete j[b]};var k=function(a){a.on("alias",function(b,c){return n(a._config.alias,function(a,b){return"function"==typeof b?b(c):b[c]})})},l=/(^\w*:\/\/)|(^[.\/])/,m=function(a){a.on("resolve",function(b,c){var d=n(a._config.resolve,function(a,b){return b(c)});return!d&&l.test(c)&&(d=c),d})},n=function(a,b){if(a)for(var c=0,d=a.length;d>c;c++){var e=a[c],f=b(c,e);if(f)return f}},o=function(b){b.define("require",function(){return a.proxy(b,"require")}),b.define("module",function(){return{$compile:function(a){return a}}}),b.define("exports",function(){return{$compile:function(a){return a.exports}}})};c.on("define",function(a){a.anonymous&&(b.debug("require anonymous module:",a.namespace,":",a.id),e(a.namespace,a.id))});var p={};return c.on("request",function(c,e){var h=c.url,i=p[h]=p[h]||[];return i.push(e),i.length>1?!0:(g(h,function(){var e=f[c.namespace]||{};!e[c.id]&&l.test(c.id)&&(b.debug("define proxy module for:",c.id),d(c.namespace,c.id)),delete p[h],a.each(i,function(a,b){b()})}),!0)}),h}),define("weave",["util","loaderdefine","modules","loader","global"],function(a,b,c,d,e){var f=new d("butterfly"),g=a.proxy(f,"define");g("loaderdefine",function(){return b}),g("global",function(){return e}),f._modules=c,e.butterfly=f,e.define=g});